<!DOCTYPE html>
<html lang="en">

<head>
  <!--[if lt IE 9]>
    <script src="http://cdn.static.runoob.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
<![endif]-->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="<%- theme.favicon %>" />
  <link rel="alternate" type="application/rss+xml" title="<%- config.author %>" href="<%- theme.rss %>">

  <% var title=page.title; if (is_archive()){ title='Archives' ; if (is_month()){ title +=': ' + page.year + '/' +
    page.month; } else if (is_year()){ title +=': ' + page.year; } } else if (is_category()){ title='Category: ' +
    page.category; } else if (is_tag()){ title='Tag: ' + page.tag; } %>

    <!--SEO-->
    <% if (page.keywords){ %>
      <meta name="keywords"
        content="<%= config.keywords %>,<%= theme.keywords %>,<%= page.keywords %>,<%= page.title %>">
      <% } else if (config.keywords){ %>
        <meta name="keywords" content="<%= config.keywords %>,<%= theme.keywords %>">
        <%} %>
          <% if (page.description){ %>
            <meta name="description" content="<%= theme.description %>,<%= page.description %>">
            <% } else { %>
              <meta name="description" content="<%= theme.description %>,<%= config.description %>">
              <%} %>

                <script>
                  (function () {
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                    }
                    else {
                      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                  })();
                </script>

                <title>
                  <% if (title){ %>
                    <%= title %> | <% } %>
                        <%= config.title %>
                </title>

                <link href="https://cdn.staticfile.org/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet"
                  crossorigin="anonymous">

                <link href="https://cdn.staticfile.org/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
                <script async src="https://use.fontawesome.com/f2ad64ea31.js"></script>

                <%- css('css/future.css') %>
                  <%- css('css/main') %>

                    <!--引用cdn服务的时候，怎么做到cdn加载不到之后用本地的-->
                    <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.7.0/jquery.min.js"></script>

                    <script type="text/javascript"
                      src="https://cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
                      <script src="https://d3js.org/d3.v7.min.js"></script>

                    <%- js("js/ax.js") %>
                    <%- js("/js/zanzhu_yaoqs.js") %>
                    <%- js("/js/main.js") %>
</head>

<body>
  <%- partial('./_partial/aside.ejs') %>
    <%- include('./_partial/nav.ejs') %>

      <% if (page.title=="" ){ %>
        <%- body %>
          <% } else { %>
            <div>
              <div id="journal-name">
                <%- theme.Journal.title %> <br>
                  <%- theme.Journal.subtitle %>
              </div>

              <div id="post">
                <% if (page.title==site.title) { %>
                  <%- body %>
                    <% } else { %>
                      <main id="content">

                        <%- body %>
                      </main>
                      <% } %>
              </div>

            </div>

            <script>
              if ($("#journal-name")[0].style.display != "none") {
                $("#journal-name")[0].style.marginTop = $('.navbar')[0].offsetHeight.toString() + "px";
              }
              else {
                $("#face")[0].style.marginTop = $('.navbar')[0].offsetHeight.toString() + "px";
                $("#journal-name")[0].style.marginTop = $('.navbar')[0].offsetHeight.toString() + "px";
              }

            </script>
            <% } %>

              <%- include('./widget/donate') %>
</body>

</html>